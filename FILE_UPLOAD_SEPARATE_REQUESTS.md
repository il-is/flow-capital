# Раздельная загрузка файлов - Реализация

## Что было изменено:

### 1. Google Apps Script (`google-apps-script.js`)
- Добавлена поддержка двух типов запросов:
  - `requestType: 'application'` - основная заявка (без файлов)
  - `requestType: 'file'` - загрузка одного файла
- Функция `handleApplicationSubmission()` - обрабатывает основную заявку
- Функция `handleFileUpload()` - обрабатывает загрузку одного файла
- Функция `updateFileUrlInSheet()` - обновляет ссылку на файл в таблице после загрузки

### 2. Next.js Backend (`src/lib/googleSheets.ts`)
- Переработана функция `submitStartupApplication()`:
  1. **Шаг 1:** Отправляет основную заявку БЕЗ файлов
  2. **Шаг 2:** Получает `submissionId` и `folderId`
  3. **Шаг 3:** Отправляет каждый файл отдельным запросом последовательно
- Каждый файл обрабатывается независимо - если один не загрузится, остальные сохранятся

## Преимущества:

✅ Основные данные всегда сохранятся в таблице  
✅ Каждый файл обрабатывается отдельно (не превышаем лимит 6MB)  
✅ Если один файл не загрузится, остальные все равно сохранятся  
✅ Детальное логирование каждого шага  
✅ Автоматическое обновление ссылок на файлы в таблице  

## Как обновить:

1. Скопируйте обновленный `google-apps-script.js` в Google Apps Script
2. Сохраните и разверните новую версию
3. Код в репозитории уже обновлен - при следующем деплое изменения применятся автоматически

## Процесс загрузки:

```
1. Пользователь отправляет форму
   ↓
2. Отправка основной заявки (текстовые данные) → Создание папки в Drive
   ↓
3. Загрузка файла 1 (teamResume) → Сохранение → Обновление ссылки в таблице
   ↓
4. Загрузка файла 2 (financialModel) → Сохранение → Обновление ссылки в таблице
   ↓
5. Загрузка файла 3 (docs) → Сохранение → Обновление ссылки в таблице
   ↓
6. Отправка email уведомления
```

Все файлы сохраняются с оригинальными именами в созданную папку в Google Drive.

